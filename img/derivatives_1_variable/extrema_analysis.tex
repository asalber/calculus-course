% Author: Alfredo SÃ¡nchez Alberca (asalber@ceu.es)
\begin{tikzpicture}[trim axis left, trim axis right]
  \begin{axis}[
    2dfun, 
    xmin=-2, xmax=2,
    ymin=-2, ymax=2,
    axis equal=true,
    clip=false, 
    width=5cm,
    ]
    \addplot+[domain=-1.5:1.5, smooth, name path=F] {x^4-2*x^2+1} node[anchor=south west] {$f(x)=x^4-2x^2+1$};
    \addplot+[domain=-1.2:1.2, smooth, name path=D] {4*x^3-4*x)} node[anchor=south west] {$f'(x)=4x^3-4x$};
    \node[anchor=east] at (-2,-2.7) {Increase $f(x)$};
    \node[anchor=east] at (-2,-3.5) {Sign $f'(x)$};
    \node[anchor=east, visible on=<2->] at (-2,-4) {Extrema $f(x)$};
    \draw[dashed, gray] (-1,2) -- (-1,-3.5);
    \draw[dashed, gray] (0,2) -- (0,-3.5);
    \draw[dashed, gray] (1,2) -- (1,-3.5);
    \node[color2] at (-1,-3.5) {$0$};
    \node[color2] at (0,-3.5) {$0$};
    \node[color2] at (1,-3.5) {$0$};
    \node[color2] at (-1.5,-3.5) {$-$};
    \draw[->, color1] (-1.5, -2.5) -- (-1.5,-2.8);
    \node[color2] at (-0.5,-3.5) {$+$};
    \draw[->, color1] (-0.5, -2.8) -- (-0.5,-2.5);
    \node[color2] at (0.5,-3.5) {$-$};
    \draw[->, color1] (0.5, -2.5) -- (0.5,-2.8);   
    \node[color2] at (1.5,-3.5) {$+$};
    \draw[->, color1] (1.5, -2.8) -- (1.5,-2.5);
    \fill<3-> (-1,0) circle (1.2pt);
    \node<3->[color1] at (-1,-4) {Min};
    \fill<4-> (0,1) circle (1.2pt);
    \node<4->[color1] at (0,-4) {Max};
    \fill<5-> (1,0) circle (1.2pt);
    \node<5->[color1] at (1,-4) {Min};
  \end{axis};
  \begin{axis}[
    2dfun, 
    xmin=-2.31, xmax=2.31,
    ymin=-0.1, ymax=0.1,
    hide y axis,  
    axis equal=true,
  	at={(0,-30)},
  	width=5cm, 
  ]
  \end{axis}
\end{tikzpicture}
