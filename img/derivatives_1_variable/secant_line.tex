% Author: Alfredo SÃ¡nchez Alberca (asalber@ceu.es)
\begin{tikzpicture}[trim axis left, trim axis right]
	%\useasboundingbox[draw] (0,0) rectangle (8,5);
	\begin{axis}[
			gen2dfun, 
			xmin=0, xmax=4.5,
			ymin=0, ymax=4,
			axis equal=true,  
			xtick={1,3},
			xticklabels={$a$,$a+\Delta x$},
			ytick={1,2.5},
			yticklabels={$f(a)$,$f(a+\Delta x)$}, 
			%   ticks=none,
			% 	extra y ticks={0.5,0.3},
			% 	extra y tick labels={$f(a)$, $f(a+\Delta x)$},
			% 	extra x ticks={0.5, 3},
			% 	extra x tick labels={$a$,$a+\Delta x$},
			clip=false,
			height=5cm,
		]
		\addplot+[domain=0.2:3.5, smooth, name path=F] {2^(x-2)+0.5} node[anchor=south] {$f(x)$};
		\addplot+[domain=0.2:3.5, smooth, name path=S] {1+1.5/2*(x-1)} node[anchor=west, align=left] {Secant\\ $y=f(a)+\frac{\Delta y}{\Delta x}(x-a)$};
		\fill [name intersections={of=F and S, by={A,B}}]
		(A) circle (1.2pt)
		(B) circle (1.2pt);
		\coordinate (O);
		\draw[gray, dotted] (A) -- (A|-O);
		\draw[gray, dotted] (A) -- (A-|O);
		\draw[gray, dotted] (B) -- (B|-O);
		\draw[gray, dotted] (B) -- (B-|O);
		\draw (A) -- (A-|B) node [midway, below] {$\Delta x$};
		\draw (B) -- (B|-A) node [midway, right] {$\Delta y$};
	\end{axis}
\end{tikzpicture}
