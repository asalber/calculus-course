% Author: Alfredo SÃ¡nchez Alberca (asalber@ceu.es)
\begin{tikzpicture}[trim axis left, trim axis right]
  \begin{axis}[
    gen2dfun, 
    xmin=0, xmax=4.5,
    ymin=0, ymax=3.5,
    xtick={1,3},
    xticklabels={$a$, $a+\Delta x$},
    ytick={1,2.5},
    yticklabels={$f(a)$,$f(a+\Delta x)$},
    clip=false,
    height=4cm,
    ]
    \addplot+[domain=0.2:3.5, smooth] {2^(x-2)+0.5} node[anchor=south] {$f(x)$};
    \coordinate (O);
    \coordinate (A) at (1,1);
    \coordinate (B) at (3,2.5);
    \coordinate (C) at (3,1.693147);
    \fill (A) circle (1.2pt);
    \draw[gray, dotted] (A) -- (A|-O);
    \draw[gray, dotted] (A) -- (A-|O);
    \draw[gray, dotted] (B) -- (B|-O);
    \draw[gray, dotted] (B) -- (B-|O);
    \draw[gray, dashed, visible on=<2->] (A) -- (A-|C);
    \draw[decorate, decoration={brace, amplitude=5pt, mirror}, visible on=<2->] (A) -- (C|-A) node [midway, below, yshift=-4pt] {$\Delta x$};    
    \draw[gray, dashed, visible on=<3->] (C) -- (C|-A);
    \draw[decorate, decoration={brace, amplitude=5pt, mirror}, visible on=<3->] (B) -- (B|-A) node [midway, left, xshift=-4pt] {$\Delta y$};
    \addplot+[domain=0.2:3.5, smooth, visible on=<4->] {1+ln(2)/2*(x-1)} node [anchor=west] {$y=f(a)+f'(a)(x-a)$ Tangent};
    \fill[visible on=<4->](C) circle (1.2pt);
    \draw[gray, dotted, visible on=<5->] (C) -- (C-|O);
    \draw[gray, very thin, visible on=<5->] (-0.05,1.693147) -- (0.05,1.693147);
    \node[anchor=east, , visible on=<5->] at (-0.05,1.693147) {$f(a)+f'(a)\Delta x$};
    \draw[decorate, decoration={brace, amplitude=4pt}, visible on=<6->] (C) -- (C|-A) node [midway, right, xshift=4pt] {$f'(a)\Delta x$};
    \draw[decorate, decoration={brace, amplitude=4pt}, visible on=<7->] (B) -- (C) node [pos=0.4, right, xshift=4pt, color2] {Error};
  \end{axis}
\end{tikzpicture}
