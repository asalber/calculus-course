% Author: Alfredo SÃ¡nchez Alberca (asalber@ceu.es)
\begin{tikzpicture}[trim axis left, trim axis right]
  \begin{axis}[
    2dfun, 
    xmin=-2, xmax=2,
    ymin=-4, ymax=2,
    clip=false, 
    width=5cm,
  	]
    \addplot+[domain=-1.5:1.5, smooth, name path=F] {x^4-2*x^2+1} node[anchor=south west] {$f(x)=x^4-2x^2+1$};
    \addplot+[domain=-1.2:1.2, smooth, name path=D] {4*x^3-4*x)} node[anchor=south west] {$f'(x)=4x^3-4x$};
    \addplot+[domain=-0.7:0.7, smooth, name path=D] {12*x^2-4)} node[anchor=south west, pos=0.6] {$f'(x)=12x^2-4$};
    \node[anchor=east, visible on=<2->] at (-2,-4.6) {Concavity $f(x)$};
    \node[anchor=east, visible on=<2->] at (-2,-5.5) {Sign $f''(x)$};
    \draw<3->[dashed, gray] (-0.5773503,2) -- (-0.5773503,-5.3);
    \draw<3->[dashed, gray] (0.5773503,2) -- (0.5773503,-5.3);
    \node<3->[color3] at (-0.5773503,-5.5) {$0$};
    \node<3->[color3] at (0.5773503,-5.5) {$0$};
    \node<4->[color2] at (-1.2,-5.5) {$+$};
    \node<4->[color1] at (-1.2, -4.6) {$\cup$};
    \node<5->[color2] at (0,-5.5) {$-$};
    \node<5->[color1] at (0, -4.6) {$\cap$};
    \node<6->[color2] at (1.2,-5.5) {$+$};
    \node<6->[color1] at (1.2, -4.6) {$\cup$};
    \node[color1, visible on=<7->] at (-0.5773503,-6) {Inflection};
    \node[color1, visible on=<7->] at (0.5773503,-6) {Inflection};
  \end{axis};
  \begin{axis}[visible on=<2->,
  	2dfun, 
 	 xmin=-2, xmax=2,
  	ymin=-0.1, ymax=0.1,
  	hide y axis,  
  	at={(0,-135)},
  	width=5cm, 
  	]
  \end{axis}
\end{tikzpicture}
